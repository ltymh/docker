### docker进阶

****

摘自blog：[docker快速入门](https://www.cnblogs.com/SzeCheng/p/6822905.html)

- **docker的优势**

  - 更快速的交付和部署
  - 高效的部署和扩容：Docker 容器几乎可以在任意的平台上运行，包括物理机、虚拟机、公有云、私有云、个人电脑、服务器等。 这种兼容性可以让用户把一个应用程序从一个平台直接迁移到另外一个。
  - 更高的资源利用率：一台主机上可以同时运行数千个 Docker 容器。容器除了运行其中应用外，基本不消耗额外的系统资源，使得应用的性能很高，同时系统的开销尽量小。
  - 更简单的管理

- **docker引擎**

  docker引擎是一个c/s结构的应用，主要组件见下图：

  ![引擎](http://pm1admnyl.bkt.clouddn.com/docker-jiagou.png)

  - Server是一个常驻进程
  - REST API 实现了client和server间的交互协议
  - CLI 实现容器和镜像的管理，为用户提供统一的操作界

- **docker架构**

  Docker使用C/S架构，Client 通过接口与Server进程通信实现容器的构建，运行和发布。client和server可以运行在同一台集群，也可以通过跨主机实现远程通信。

  如下图![docker-arc](http://pm1admnyl.bkt.clouddn.com/docker-architecture.jpg)

- **核心概念**

  - 镜像：Docker 镜像（Image）就是一个只读的模板。例如：一个镜像可以包含一个完整的操作系统环境，里面仅安装了 Apache 或用户需要的其它应用程序。镜像可以用来创建 Docker 容器，一个镜像可以创建很多容器。Docker 提供了一个很简单的机制来创建镜像或者更新现有的镜像，用户甚至可以直接从其他人那里下载一个已经做好的镜像来直接使用。

  - 仓库：仓库（Repository）是集中存放镜像文件的场所。有时候会把仓库和仓库注册服务器（Registry）混为一谈，并不严格区分。实际上，仓库注册服务器上往往存放着多个仓库，每个仓库中又包含了多个镜像，每个镜像有不同的标签（tag）。

    当用户创建了自己的镜像之后就可以使用 push 命令将它上传到公有或者私有仓库，这样下次在另外一台机器上使用这个镜像时候，只需要从仓库上 pull 下来就可以了。

    Docker 仓库的概念跟 Git 类似，注册服务器可以理解为 GitHub 这样的托管服务。

  - 容器：Docker 利用容器（Container）来运行应用。容器是从镜像创建的运行实例。它可以被启动、开始、停止、删除。每个容器都是相互隔离的、保证安全的平台。可以把容器看做是一个简易版的 Linux 环境（包括root用户权限、进程空间、用户空间和网络空间等）和运行在其中的应用程序。